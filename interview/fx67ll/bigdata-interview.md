# 数仓建模面试经验总结 🕹️0.2.0

## 离线数仓
1. 强调技术点，不要过多强调业务  
2. 突出定量的描述  
3. 工作职责描述一定要突出年限区分，需要挑重点，不能站在开发者的角度，一定要站在从上往下看的角度
#### 工作多年之后一定不是过于技术性的角度  
4. 写的sql与业务相关的，周边数据服务偏中台的内容，举个例子：数据血缘


## 实时数仓
1. 设计大于编码，设计本身比代码还要重要  


## 核心竞争力
### 业务+技术+结果
1. 业务域划分，订单，履约，用户，可能很多人参与开发，需要知道你参与的模块是哪一块（大公司都是螺丝钉，小公司可以负责的稍微多一点）
2. 数据地图（数据文档）、血缘（主要是为了弄清数据流向，貌似是元数据管理）、权限（严格的权限隔离，到字段级别，L1.L2.L3）、依赖（当前字段被哪些下游业务和任务引用）  
3. 指标定义（比如七天内连续3天活跃指标分析）、引用（引用了哪些表）、作用域（在哪个业务生效，比如统计单量，每个用户下有多少订单，用户域下会有，履约域也会有，可能会不相等）、负责人（负责什么指标）
4. 数据分层、流向、核心表结构和定义，需要明确写出来 
5. 对外数据服务暴露能力，第一种：hivesql生成表权限；第二种：用代码来查离线的hivesql表；实时数据仓库的对外查询能力比离线要重要  
6. 数据分析能力，并不是所有公司都可以做（数仓最基本的要求是产出指标），哪些原因影响指标，绝大部分开发不做这个，需要算法要求  

### 专业技能
1. hive spark mr深入调优，海量数据任务加工，数据倾斜排查，业务逻辑，标签划分  
2. spark复杂函数套用，对于某些场景的调用
3. 中小型公司了解可能会全面，大公司需要对某一方面专精，小公司数据倾斜十五分钟，二十分钟跑完，大公司可能几TB几PB的数据跑一两天，才真正需要优化

### 岗位
1. 数据中台建设，维护组件的升级开发，可能每个组只开发一个组件，维护组件  
2. 数据开发分析，hive sql，别人已经完成了集群的搭建和开发，数仓开发纯业务侧了，ETL  


## 数仓工作内容
1. 业务调研：收集业务资料，业务过程梳理，需要具备结构化思维  
2. 主题划分
	+ 通用框架，就是抽取出现的实体，比如：`商品 -> 用户 -> 渠道 -> 营销 -> 流量 -> 交易 -> 财务`
	+ 根据不同的行业，教育行业，金融行业，电商行业，物流行业  
3. 数仓分层
4. 模型分类
	+ 维度模型，单体模型和融合模型  
	+ 事实模型，事务事实表（所有业务数据压缩到一行上）、累积快照事实表和周期快照事实表  
	+ 构建流程  


## 专业术语
### ETL
ETL也就是Extract-Transform-Load，抽取（extract）、转换（transform）、加载（load）  

### 数仓分层
+ ODS层 (Operation Data Store)：原始数据层，存放原始数据，直接加载原始日志、数据，数据保持原貌不做处理  
+ DWD层 (Data Warehouse Detail)：对ODS层数据进行清洗（去除空值，脏数据，超过极限范围的数据）、维度退化脱敏等  
+ DWS层 (Data Warehouse Service)：以DWD为基础，按天进行轻度汇总  
+ DWT层 (Data Warehouse Topic)：以DWS为基础，按主题进行汇总  
+ ADS层 (Application Data Store)：为各种报表提供数据  
分层时为了更好的为以后提供模型数据  

### 宽窄表
#### 宽表
从字面意义上讲就是字段比较多的数据库表。通常是指业务主题相关的指标、维度、属性关联在一起的一张数据库表。由于把不同的内容都放在同一张表存储，
宽表已经不符合三范式的模型设计规范，随之带来的主要坏处就是数据的大量冗余，与之相对应的好处就是查询性能的提高与便捷。
这种宽表的设计广泛应用于数据挖掘模型训练前的数据准备，通过把相关字段放在同一张表中，可以大大提高数据挖掘模型训练过程中迭代计算时的效率问题。
（一句话，空间换时间，便于训练迭代、减少表关联数量，修改少量数据时不需要该多张表）
#### 窄表
严格按照数据库设计三范式。尽量减少数据冗余，但是缺点是修改一个数据可能需要修改多张表

### 三范式
第一范式：保证每列的原子性，数据库表中的所有字段值都是不可分解的原子值  
第二范式：保证一张表只描述一件事情  
第三范式：保证每列都和主键直接相关  


## 为什么要数据建模
为了更好的将数据有序、有结构地分类组织和存储，它强调从业务，数据存取和使用的角度合理存储数据  

大数据系统需要数据模型方法来帮助更好地组织和存储数据，以便在性能、效率和质量之间取得最佳平衡  
+ 性能：良好的模型可以更快的查询所需要的数据，减少数据的IO吞吐  
+ 成本：极大地减少不必要的数据冗余，实现计算复用，降低存储和计算成本  
+ 效率：良好的模型能极大的改善用户使用数据的体验，提高使用数据的效率  
+ 质量：良好的模型能改善数据统计口径的不一致性，减少计算错误的可能性  

业务系统和决策性的系统  
关系型数据和数据仓库  
OLTP和OLAP  
1. OLTP的全称是On-line Transaction Processing，中文名称是联机事务处理。其特点是会有高并发且数据量级不大的查询，是主要用于管理事务（transaction-oriented)的系统  
2. OLAP的全称是 On-line Analytical Processing，中文名称是联机分析处理。其特点是查询频率较OLTP系统更低，但通常会涉及到非常复杂的聚合计算  

ER建模和维度建模
#### 后续从这里继续记录  
**[教程](https://www.bilibili.com/video/BV1cS4y1r76e?p=3)看到这里了，继续往后看，相当于帮助你理解《阿里大数据之路》这本书**  

我是 [fx67ll.com](https://fx67ll.com)，如果您发现本文有什么错误，欢迎在评论区讨论指正，感谢您的阅读！  
如果您喜欢这篇文章，欢迎访问我的 [本文github仓库地址](https://github.com/fx67ll/fx67llBigData/blob/main/interview/fx67ll/bigdata-interview.md)，为我点一颗Star，Thanks~ :)  
***转发请注明参考文章地址，非常感谢！！！***