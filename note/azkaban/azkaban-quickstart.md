# Azkabanå¿«é€Ÿå…¥é—¨ ğŸ•¹ï¸0.2.0

## æ•°æ®æº
ä¸šåŠ¡ç³»ç»Ÿä¸­çš„æ•°æ®åº“å’Œæ—¥å¿—æ•°æ®  

## å¦‚ä½•é€‰æ‹©å¸‚é¢ä¸Šçš„ä»»åŠ¡è°ƒåº¦å·¥å…·
1. ç®€å•çš„ä»»åŠ¡
Linux crontabæ˜¯ç”¨æ¥å®šæœŸæ‰§è¡Œç¨‹åºçš„å‘½ä»¤
2. å¤æ‚çš„ä»»åŠ¡
**Oozie/Azkaban/Airflow/DolphinScheduler**
Azkaban æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å·¥ä½œæµç®¡ç†ç¨‹åºï¼Œè§£å†³Hadoopå·¥ä½œä¾èµ–æ€§é—®é¢˜
Oozie ç›¸æ¯” Azkaban æ˜¯ä¸€ä¸ªé‡é‡çº§çš„ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼ŒåŠŸèƒ½å…¨é¢ï¼Œä½†é…ç½®ä½¿ç”¨ä¹Ÿæ›´å¤æ‚  
Airflow ä½¿ç”¨pythonè„šæœ¬  
DolphinScheduler ä½¿ç”¨å¯è§†åŒ–çš„æ–¹å¼æ“ä½œï¼Œå›½äº§ï¼Œæ‰€ä»¥ç°åœ¨æ¯”è¾ƒç«  

### Azkabanå’ŒOozieä¹‹é—´çš„åŒºåˆ«
æ€»ä½“æ¥è¯´ï¼Œooizeç›¸æ¯”azkabanæ˜¯ä¸€ä¸ªé‡é‡çº§çš„ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼ŒåŠŸèƒ½å…¨é¢ï¼Œä½†é…ç½®ä½¿ç”¨ä¹Ÿæ›´å¤æ‚ï¼Œ
å¦‚æœå¯ä»¥ä¸åœ¨æ„æŸäº›åŠŸèƒ½çš„ç¼ºå¤±ï¼Œè½»é‡çº§è°ƒåº¦å™¨azkabanæ˜¯å¾ˆä¸é”™çš„å€™é€‰å¯¹è±¡  
1. åŠŸèƒ½
	+ ä¸¤è€…å‡å¯ä»¥è°ƒåº¦linuxã€mapreduceã€pigã€sparkã€javaç­‰è„šæœ¬å·¥ä½œæµä»»åŠ¡    
	+ ä¸¤è€…å‡å¯ä»¥å®šæ—¶æ‰§è¡Œå·¥ä½œæµä»»åŠ¡  
2. å·¥ä½œæµå®šä¹‰
	+ Azkabanä½¿ç”¨Propertiesæ–‡ä»¶å®šä¹‰å·¥ä½œæµ  
	+ Oozieä½¿ç”¨XMLæ–‡ä»¶å®šä¹‰å·¥ä½œæµ  
3. å·¥ä½œæµä¼ å‚
	+ Azkabanæ”¯æŒç›´æ¥ä¼ å‚ï¼Œä¾‹å¦‚`${input}`  
	+ Oozieæ”¯æŒå‚æ•°å’ŒELè¡¨è¾¾å¼ï¼Œä¾‹å¦‚`${fs:dirSize(myInputDir)}`
4. å®šæ—¶æ‰§è¡Œ
	+ Azkabançš„å®šæ—¶æ‰§è¡Œä»»åŠ¡æ˜¯åŸºäºæ—¶é—´çš„
	+ Oozieçš„å®šæ—¶æ‰§è¡Œä»»åŠ¡åŸºäºæ—¶é—´å’Œè¾“å…¥æ•°æ®ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä½†æ˜¯å¸¦æ¥é…ç½®çš„å¤æ‚åº¦æ¯”è¾ƒé«˜  
5. èµ„æºç®¡ç†
	+ Azkabanæœ‰è¾ƒä¸¥æ ¼çš„æƒé™æ§åˆ¶ï¼Œå¦‚ç”¨æˆ·å¯¹å·¥ä½œæµè¿›è¡Œè¯»/å†™/æ‰§è¡Œç­‰æ“ä½œ  
	+ Oozieæš‚æ— ä¸¥æ ¼çš„æƒé™æ§åˆ¶ï¼Œå¤šäººåä½œå°±æ¯”è¾ƒéº»çƒ¦äº†  
6. å·¥ä½œæµæ‰§è¡Œ
	+ Azkabanæœ‰ä¸‰ç§è¿è¡Œæ¨¡å¼ï¼šsolo server modeã€ two server modeã€multiple executor mode  
	+ Oozieä½œä¸ºå·¥ä½œæµæœåŠ¡å™¨è¿è¡Œï¼Œæ”¯æŒå¤šç”¨æˆ·å’Œå¤šå·¥ä½œæµ  
7. å·¥ä½œæµç®¡ç†
	+ Azkabanæ”¯æŒæµè§ˆå™¨ä»¥åŠajaxæ–¹å¼æ“ä½œå·¥ä½œæµ  
	+ Oozieæ”¯æŒå‘½ä»¤è¡Œã€HTTP RESTã€Java APIã€æµè§ˆå™¨æ“ä½œå·¥ä½œæµ  
8. ä¾èµ–  
	+ Azkabanä¾èµ–äºMySql  
	+ Oozieä¾èµ–äºhadoop  
#### å‚è€ƒèµ„æ–™â€”â€”â€”â€”Azkabanå’ŒOozieä¹‹é—´çš„åŒºåˆ«
1. [Azkabanå’ŒOozieçš„åŒºåˆ«](https://www.bbsmax.com/A/LPdoOPMyd3/)  
2. [Azkabanå’ŒOozieçš„åŒºåˆ«](https://blog.csdn.net/weixin_42350858/article/details/107706439)  


## ä»€ä¹ˆæ˜¯Azkaban
Azkabanæ˜¯ç”±Linkedinå…¬å¸æ¨å‡ºçš„ä¸€ä¸ªæ‰¹é‡å·¥ä½œæµä»»åŠ¡è°ƒåº¦å™¨ï¼Œä¸»è¦ç”¨äºåœ¨ä¸€ä¸ªå·¥ä½œæµå†…ä»¥ä¸€ä¸ªç‰¹å®šçš„é¡ºåºè¿è¡Œä¸€ç»„å·¥ä½œå’Œæµç¨‹ï¼Œ
å®ƒçš„é…ç½®æ˜¯é€šè¿‡ç®€å•çš„key:valueå¯¹çš„æ–¹å¼ï¼Œé€šè¿‡é…ç½®ä¸­çš„dependencies æ¥è®¾ç½®ä¾èµ–å…³ç³»ã€‚
Azkabanä½¿ç”¨jobé…ç½®æ–‡ä»¶å»ºç«‹ä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶æä¾›ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„webç”¨æˆ·ç•Œé¢ç»´æŠ¤å’Œè·Ÿè¸ªä½ çš„å·¥ä½œæµã€‚


## Azkabançš„ç‰¹ç‚¹
1. å…¼å®¹ä»»ä½•ç‰ˆæœ¬çš„hadoop  
2. æ˜“äºä½¿ç”¨çš„Webç”¨æˆ·ç•Œé¢  
3. ç®€å•çš„å·¥ä½œæµçš„ä¸Šä¼   
4. æ–¹ä¾¿è®¾ç½®ä»»åŠ¡ä¹‹é—´çš„å…³ç³»  
5. è°ƒåº¦å·¥ä½œæµ  
6. æ¨¡å—åŒ–å’Œå¯æ’æ‹”çš„æ’ä»¶æœºåˆ¶  
7. è®¤è¯/æˆæƒ(æƒé™çš„å·¥ä½œ)  
8. èƒ½å¤Ÿæ€æ­»å¹¶é‡æ–°å¯åŠ¨å·¥ä½œæµ  
9. æœ‰å…³å¤±è´¥å’ŒæˆåŠŸçš„ç”µå­é‚®ä»¶æé†’  


## æ¶æ„
#### AzkabanWebServer
`AzkabanWebServer`æ˜¯æ•´ä¸ªAzkabanå·¥ä½œæµç³»ç»Ÿçš„ä¸»è¦ç®¡ç†è€…ï¼Œå®ƒç”¨æˆ·ç™»å½•è®¤è¯ã€è´Ÿè´£projectç®¡ç†ã€å®šæ—¶æ‰§è¡Œå·¥ä½œæµã€è·Ÿè¸ªå·¥ä½œæµæ‰§è¡Œè¿›åº¦ç­‰ä¸€ç³»åˆ—ä»»åŠ¡  
#### AzkabanExecutorServer
è´Ÿè´£å…·ä½“çš„å·¥ä½œæµçš„æäº¤ã€æ‰§è¡Œï¼Œå®ƒä»¬é€šè¿‡mysqlæ•°æ®åº“æ¥åè°ƒä»»åŠ¡çš„æ‰§è¡Œ  
#### å…³ç³»å‹æ•°æ®åº“ï¼ˆMySQLï¼‰
å­˜å‚¨å¤§éƒ¨åˆ†æ‰§è¡ŒæµçŠ¶æ€ï¼Œ`AzkabanWebServer`å’Œ`AzkabanExecutorServer`éƒ½éœ€è¦è®¿é—®æ•°æ®åº“  


## éƒ¨ç½²æ¨¡å¼
1. Solo
	+ WebServerå’ŒExecServeréƒ½å¯åŠ¨åœ¨ä¸€ä¸ªJVMä¸­ï¼Œå°±ä¸€ä¸ªè¿›ç¨‹  
	+ ä½¿ç”¨å†…ç½®çš„H2æ•°æ®åº“æ¥å­˜å‚¨å…ƒæ•°æ®  
2. Two Server
	+ ä¸€å°æœºå™¨æ¨¡å¼ï¼šåªæœ‰ä¸€å°ExecutorServer  
	+ WebServerå’ŒExecutorServeræ˜¯ä¸åŒçš„ç‹¬ç«‹çš„è¿›ç¨‹  
	+ ä½¿ç”¨MySQLå­˜å‚¨å…ƒæ•°æ®  
3. Multiple Executor
	+ ä»3.+ å¼€å§‹ï¼Œæ”¯æŒå¤šä¸ªExecutor  
	+ å¤šå°æœºå™¨æ¨¡å¼ï¼šå¤šä¸ªExecutorServer  
	+ WebServerå’ŒExecutorå¯ä»¥ä¸åœ¨ä¸€å°æœºå™¨ä¸Š  
	+ ä½¿ç”¨MySQLå­˜å‚¨å…ƒæ•°æ®  
#### å‚è€ƒèµ„æ–™â€”â€”â€”â€”Azkabançš„éƒ¨ç½²æ¨¡å¼
[Azkaban--éƒ¨ç½²æ¨¡å¼](https://blog.csdn.net/qq_46893497/article/details/110847616)  
[azkabançš„ä¸‰ç§å®‰è£…éƒ¨ç½²æ–¹å¼](http://t.zoukankan.com/haojia-p-12386222.html)  


## å®‰è£…ä¾èµ–åŒ…åŠå…¶ä½œç”¨
```
# è¯¥åŒ…ä¸­å°±æ˜¯æ‰€æœ‰çš„å»ºè¡¨è¯­å¥ï¼Œä¸»è¦æ˜¯é…ç½® MySQL
azkaban-db-3.84.4.tar.gz  

# æ‰§è¡ŒæœåŠ¡å™¨ï¼ˆExecutorï¼‰é…ç½®
azkaban-exec-server-3.84.4.tar.gz  

# æœåŠ¡å™¨ï¼ˆWebï¼‰é…ç½®
azkaban-web-server-3.84.4.tar.gz  
```

## è®¿é—®ç«¯å£å·
é»˜è®¤æ˜¯*8443*ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶`azkaban.properties`çš„æ–¹å¼æ›´æ”¹ç«¯å£å·  
ç«¯å£å·ä½¿ç”¨è§„åˆ™ï¼š`jetty.ssl.port > jetty.port`  
ä½†æ˜¯ä½¿ç”¨`jetty.ssl.port`çš„å‰ææ˜¯`jetty.use.ssl = true`ï¼Œè¿™ä¸ªé…ç½®è¡¨ç¤ºå¼€å¯sslå®‰å…¨å¥—æ¥å±‚ï¼Œå¦åˆ™ä½¿ç”¨jetty.portç«¯å£  
```
# ç¤ºä¾‹é…ç½®æ–‡ä»¶
jetty.use.ssl=false
jetty.maxThreads=25

jetty.ssl.port=8443
jetty.port=8081

jetty.keystore=keystore
jetty.password=password
jetty.keypassword=password
jetty.truststore=keystore
jetty.trustpassword=password
```
#### å‚è€ƒæ–‡æ¡£â€”â€”â€”â€”è®¿é—®ç«¯å£å·  
[Azkaban WebUI ç«¯å£å·](https://lawson-t.blog.csdn.net/article/details/83151440)  


## åŸºæœ¬ä½¿ç”¨ä»‹ç»
1. projectsï¼šæœ€é‡è¦çš„éƒ¨åˆ†ï¼Œåˆ›å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œæ‰€æœ‰flowså°†åœ¨å·¥ç¨‹ä¸­è¿è¡Œ    
2. scheduling: æ˜¾ç¤ºå®šæ—¶ä»»åŠ¡  
3. executing: æ˜¾ç¤ºå½“å‰è¿è¡Œçš„ä»»åŠ¡  
4. history: æ˜¾ç¤ºå†å²è¿è¡Œä»»åŠ¡  


## Azkabanä½¿ç”¨æ¡ˆä¾‹


[azkabanç®€ä»‹åŠazkabanéƒ¨ç½²ã€åŸç†å’Œä½¿ç”¨ä»‹ç»](https://blog.csdn.net/wt334502157/article/details/116891032)  
[Azkabanå¿«é€Ÿå…¥é—¨ç³»åˆ—(1) | Azkabançš„ç®€å•ä»‹ç»](https://blog.csdn.net/qq_16146103/article/details/106198309)  
[å¤§æ•°æ®---Azkabanå¿«é€Ÿå…¥é—¨](https://blog.csdn.net/qq_43785075/article/details/120576710)  
[Azkabanæ•™ç¨‹](https://blog.csdn.net/qq_41072814/article/details/116378508)  


æˆ‘æ˜¯ [fx67ll.com](https://fx67ll.com)ï¼Œå¦‚æœæ‚¨å‘ç°æœ¬æ–‡æœ‰ä»€ä¹ˆé”™è¯¯ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºæŒ‡æ­£ï¼Œæ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼  
å¦‚æœæ‚¨å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œæ¬¢è¿è®¿é—®æˆ‘çš„ [æœ¬æ–‡githubä»“åº“åœ°å€](https://github.com/fx67ll/fx67llBigData/blob/main/note/azkaban/azkaban-quickstart.md)ï¼Œä¸ºæˆ‘ç‚¹ä¸€é¢—Starï¼ŒThanks~ :)  
***è½¬å‘è¯·æ³¨æ˜å‚è€ƒæ–‡ç« åœ°å€ï¼Œéå¸¸æ„Ÿè°¢ï¼ï¼ï¼***